{ config, pkgs, lib, ... }:

{
	boot.kernelPatches = [{
		# TODO: temporary, while we're not using the cache
		patch = null;
		extraStructuredConfig = with lib.kernel; {
			# big :-/
			XFS_FS = no;
			OCFS2_FS = no;
			NETWORK_FILESYSTEMS = no;
			JFS_FS = no;
			REISERFS_FS = no;
			BCACHE_FS = no;
			NILFS2_FS = no;
			GFS2_FS = no;
			# i don't think we need these?
			SCSI = lib.mkForce no;
			ATA_SFF = no;
			ARCNET = no;
			LIBNVDIMM = no;
			FPGA = no;
			CXL_BUS = no;
			RAPIDIO = no;
			MISC_FILESYSTEMS = no;
			FSI = no;
			GREYBUS = no;
			CHROME_PLATFORMS = lib.mkForce no;
			ACCESSIBILITY = lib.mkForce no;
			COMEDI = no;
			EXTCON = no;
			WLAN_VENDOR_ATH = no;
			WLAN_VENDOR_INTEL = no;
			WLAN_VENDOR_INTERSIL = no;
			WLAN_VENDOR_MARVELL = no;
			WLAN_VENDOR_MICROCHIP = no;
			WLAN_VENDOR_PURELIFI = no;
			WLAN_VENDOR_RALINK = no;
			WLAN_VENDOR_REALTEK = no;
			WLAN_VENDOR_RSI = no;
			WLAN_VENDOR_SILABS = no;
			WLAN_VENDOR_ST = no;
			WLAN_VENDOR_TI = no;
			WLAN_VENDOR_ZYDAS = no;
			WLAN_VENDOR_QUANTENNA = no;
			WLAN_VENDOR_ADMTEK = no;
			WLAN_VENDOR_ATMEL = no;
			WLAN_VENDOR_BROADCOM = no;
			XEN = lib.mkForce no;
			NET_VENDOR_3COM = no;
			NET_VENDOR_ADAPTEC = no;
			NET_VENDOR_AGERE = no;
			NET_VENDOR_ALACRITECH = no;
			NET_VENDOR_ALTEON = no;
			NET_VENDOR_AMAZON = no;
			NET_VENDOR_AMD = no;
			NET_VENDOR_AQUANTIA = no;
			NET_VENDOR_ARC = no;
			NET_VENDOR_ASIX = no;
			NET_VENDOR_ATHEROS = no;
			NET_VENDOR_BROADCOM = no;
			NET_VENDOR_CADENCE = no;
			NET_VENDOR_CAVIUM = no;
			NET_VENDOR_CHELSIO = no;
			NET_VENDOR_CISCO = no;
			NET_VENDOR_CORTINA = no;
			NET_VENDOR_DAVICOM = no;
			NET_VENDOR_DEC = no;
			NET_VENDOR_DLINK = no;
			NET_VENDOR_EMULEX = no;
			NET_VENDOR_ENGLEDER = no;
			NET_VENDOR_EZCHIP = no;
			NET_VENDOR_FUNGIBLE = no;
			NET_VENDOR_GOOGLE = no;
			NET_VENDOR_HISILICON = no;
			NET_VENDOR_HUAWEI = no;
			NET_VENDOR_I825XX = no;
			NET_VENDOR_INTEL = no;
			NET_VENDOR_ADI = no;
			NET_VENDOR_LITEX = no;
			NET_VENDOR_MARVELL = no;
			NET_VENDOR_MELLANOX = no;
			NET_VENDOR_META = no;
			NET_VENDOR_MICREL = no;
			NET_VENDOR_MICROCHIP = no;
			NET_VENDOR_MICROSEMI = no;
			NET_VENDOR_MICROSOFT = no;
			NET_VENDOR_MYRI = no;
			NET_VENDOR_NI = no;
			NET_VENDOR_NATSEMI = no;
			NET_VENDOR_NETERION = no;
			NET_VENDOR_NETRONOME = no;
			NET_VENDOR_8390 = no;
			NET_VENDOR_NVIDIA = no;
			NET_VENDOR_OKI = no;
			NET_VENDOR_PACKET_ENGINES = no;
			NET_VENDOR_PENSANDO = no;
			NET_VENDOR_QLOGIC = no;
			NET_VENDOR_BROCADE = no;
			NET_VENDOR_QUALCOMM = no;
			NET_VENDOR_RDC = no;
			NET_VENDOR_REALTEK = no;
			NET_VENDOR_RENESAS = no;
			NET_VENDOR_ROCKER = no;
			NET_VENDOR_SAMSUNG = no;
			NET_VENDOR_SEEQ = no;
			NET_VENDOR_SILAN = no;
			NET_VENDOR_SIS = no;
			NET_VENDOR_SOLARFLARE = no;
			NET_VENDOR_SMSC = no;
			NET_VENDOR_SOCIONEXT = no;
			NET_VENDOR_STMICRO = no;
			NET_VENDOR_SUN = no;
			NET_VENDOR_SYNOPSYS = no;
			NET_VENDOR_TEHUTI = no;
			NET_VENDOR_TI = no;
			NET_VENDOR_VERTEXCOM = no;
			NET_VENDOR_VIA = no;
			NET_VENDOR_WANGXUN = no;
			NET_VENDOR_WIZNET = no;
			NET_VENDOR_XILINX = no;
		};
	}];
}
